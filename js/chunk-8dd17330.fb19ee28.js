(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8dd17330"],{"496a":function(e,t,a){"use strict";a("c747")},a62e:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"about"},[t("div",{attrs:{id:"myMap"}}),t("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini",title:"点击返回上一级"},on:{click:e.upside}},[e._v(e._s(e.adName))])],1)},r=[],l=(a("14d9"),a("bc3a")),i=a.n(l),s=a("0e0b");let n=null,h=null;var c={name:"about",data(){return{optionMap:{tooltip:{show:!1},geo:[{map:"china",aspectScale:1,zoom:.9,layoutCenter:["50%","50%"],layoutSize:"180%",show:!0,roam:!1,label:{show:!1,color:"#fff"},itemStyle:{areaColor:{type:"linear",x:1200,y:0,x2:0,y2:0,colorStops:[{offset:0,color:"rgba(3,27,78,0.75)"},{offset:1,color:"rgba(58,149,253,0.75)"}],global:!0},borderColor:"#c0f3fb",borderWidth:.8},emphasis:{itemStyle:{show:!1,color:"#fff",areaColor:"rgba(0,254,233,0.6)"},label:{show:!0,color:"#fff"}}},{type:"map",map:"china",zlevel:-1,aspectScale:1,zoom:.9,layoutCenter:["50%","51%"],layoutSize:"180%",roam:!1,silent:!0,itemStyle:{borderWidth:1,borderColor:"rgba(58,149,253,0.8)",shadowColor:"rgba(172, 122, 255,0.5)",shadowOffsetY:5,shadowBlur:15,areaColor:"rgba(5,21,35,0.1)"}},{type:"map",map:"china",zlevel:-2,aspectScale:1,zoom:.9,layoutCenter:["50%","52%"],layoutSize:"180%",roam:!1,silent:!0,itemStyle:{borderWidth:1,borderColor:"rgba(58,149,253,0.6)",shadowColor:"rgba(65, 214, 255,0.6)",shadowOffsetY:5,shadowBlur:15,areaColor:"rgba(5,21,35,0.1)"}},{type:"map",map:"china",zlevel:-3,aspectScale:1,zoom:.9,layoutCenter:["50%","53%"],layoutSize:"180%",roam:!1,silent:!0,itemStyle:{borderWidth:1,borderColor:"rgba(58,149,253,0.4)",shadowColor:"rgba(29, 111, 165,1)",shadowOffsetY:15,shadowBlur:10,areaColor:"rgba(5,21,35,0.1)"}},{type:"map",map:"china",zlevel:-4,aspectScale:1,zoom:.9,layoutCenter:["50%","54%"],layoutSize:"180%",roam:!1,silent:!0,itemStyle:{borderWidth:5,borderColor:"rgba(5,9,57,0.8)",shadowColor:"rgba(29, 111, 165,0.8)",shadowOffsetY:15,shadowBlur:10,areaColor:"rgba(5,21,35,0.1)"}}],series:[{type:"lines",zlevel:2,effect:{show:!0,period:3,trailLength:.03,symbol:"arrow",symbolSize:6},lineStyle:{color:"#EE5652",width:1,opacity:1,curveness:.3},data:[],symbol:["none","circle"],symbolSize:10},{type:"effectScatter",zlevel:3,coordinateSystem:"geo",emphasis:{label:{show:!0,position:"top",color:"#fff",formatter:"{b|{b}}"}},label:{show:!1,position:"top",color:"#fff"},data:[],symbol:"circle",symbolSize:[20,10],itemStyle:{color:"orange",shadowBlur:10,shadowColor:"orange"},effectType:"ripple",showEffectOn:"render",rippleEffect:{scale:5,brushType:"stroke"}}]},publicUrl:"https://geo.datav.aliyun.com/areas_v3/bound/",level:0,historyData:[],adName:"中国",alladcode:"",resData:[]}},methods:{async formatJson(e){return e.features.forEach(e=>{e.properties&&"海南省"==e.properties.name&&(e.geometry.coordinates=e.geometry.coordinates.slice(0,1))}),e.features=e.features.filter(e=>"100000_JD"!==e.properties.adcode),e},async initChart(){let e=await this.getGeoJson("all.json");this.alladcode=e.data;let t=await this.getGeoJson("100000_full.json"),o=await this.formatJson(t.data),r={b:{color:"#fff",backgroundColor:{image:a("1590")},padding:[20,30],fontSize:14,align:"center"}};this.optionMap.series[1].emphasis.label.rich=r,this.optionMap.series[1].label.rich=r,this.initEcharts(o,"china")},filterLines(e){let t=[],a=[120.537612,31.276282];return e.forEach(e=>{let o=[e.value[0],e.value[1]];t.push({coords:[o,a]})}),t},highLightPoint(e,t){e.forEach((e,a)=>{let o=a==t?"aqua":"orange";e.itemStyle={color:o,shadowColor:o}}),this.optionMap.series[1].label.formatter=a=>a.name===e[t].name?`{b|${a.name}}`:""},formatChart(e,t){let a=this.resData.filter(t=>Object(s["a"])([t.value[0],t.value[1]],e.features));if(this.adName="china"==t?"中国":t,this.$echarts.registerMap(t,e),this.optionMap.geo.forEach(e=>{e.map=t,e.layoutSize="china"==t?"180%":"100%"}),this.optionMap.series[0].data=this.filterLines(a),this.optionMap.series[1].data=a,this.highLightPoint(a,0),this.optionMap.series[1].label.show=!0,n.clear(),n.setOption(this.optionMap),h&&(clearInterval(h),h=null),a.length>1){let e=0;h=setInterval(()=>{e++,e>=a.length&&(e=0),this.highLightPoint(a,e),n.setOption(this.optionMap)},3e3)}},initEcharts(e,t){this.formatChart(e,t),n.hideLoading(),window.addEventListener("resize",()=>{n.resize()}),this.level++,this.historyData.push({geoJson:e,name:t}),n.off("click"),n.on("click",e=>{if("geo"!=e.componentType)return;let t=this.alladcode.filter(t=>t.name===e.name)[0].adcode,o=["460400","460300","441900","442000","620200"],r=t+"_full.json";("00"!=t.toString().slice(-2)||o.includes(t.toString()))&&(r=t+".json"),this.getGeoJson(r).then(t=>{this.initEcharts(t.data,e.name)}).catch(e=>{this.level=0,this.historyData=[],this.initEcharts(a("2ec2"),"china")})})},async getGeoJson(e){return await i.a.get(this.publicUrl+e)},upside(){if(this.historyData.length<=1)return;this.level--,this.historyData.pop();let e=this.historyData[this.level-1];this.formatChart(e.geoJson,e.name)}},watch:{"$store.state.isCollapse":{handler(e,t){setTimeout(()=>{n.resize()},500)}}},mounted(){n=this.$echarts.init(document.getElementById("myMap")),n.showLoading({text:"加载中...",textColor:"#fff",color:"#fff",maskColor:"rgba(0 ,0 ,0 ,0.3 )",zlevel:0}),this.resData=[{name:"广州市",value:[113.2644,23.1291]},{name:"成都市",value:[104.0657,30.6598]},{name:"苏州市",value:[120.6195,31.2995]},{name:"北京市",value:[116.404,39.9042]},{name:"连云港市",value:[119.1676,34.5934]},{name:"南京市",value:[118.7674,32.0415]},{name:"杭州市",value:[120.1535,30.2874]},{name:"乌鲁木齐市",value:[87.6168,43.7928]},{name:"拉萨市",value:[91.11,29.97]},{name:"西安市",value:[108.953,34.2779]},{name:"南宁市",value:[108.32006,22.82402]}],this.initChart()},destroyed(){n&&n.clear(),h&&(clearInterval(h),h=null)}},p=c,d=(a("496a"),a("2877")),m=Object(d["a"])(p,o,r,!1,null,null,null);t["default"]=m.exports},c747:function(e,t,a){}}]);
//# sourceMappingURL=chunk-8dd17330.fb19ee28.js.map