{"version":3,"sources":["webpack:///./src/views/echarts3.vue","webpack:///src/views/echarts3.vue","webpack:///./src/views/echarts3.vue?ff47","webpack:///./src/views/echarts3.vue?0ef9","webpack:///./src/views/echarts3.vue?7f8e"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","upside","_v","_s","adName","staticRenderFns","myChartMap","name","data","optionMap","tooltip","show","geo","map","aspectScale","zoom","layoutCenter","layoutSize","roam","label","color","itemStyle","areaColor","type","x","y","x2","y2","colorStops","offset","global","borderColor","borderWidth","emphasis","zlevel","silent","shadowColor","shadowOffsetY","shadowBlur","series","coordinateSystem","publicUrl","level","historyData","alladcode","methods","chinaGeoJson","features","forEach","v","properties","geometry","coordinates","slice","filter","item","adcode","geoJson","getGeoJson","formatChinaGeoJson","formatJson","initEcharts","formatChart","$echarts","registerMap","clear","setOption","hideLoading","window","addEventListener","resize","push","off","params","clickRegionCode","areaJson","adcodeArr","regJson","toString","includes","then","regionGeoJson","catch","err","require","jsonName","axios","get","length","pop","upData","watch","handler","newVal","oldVal","setTimeout","mounted","init","document","getElementById","showLoading","text","textColor","maskColor","initChart","destroyed","component"],"mappings":"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","file":"js/chunk-5dfcfd6d.e3db9b8c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"about\"},[_c('div',{attrs:{\"id\":\"myMap\"}}),_c('el-button',{staticClass:\"btn\",attrs:{\"type\":\"primary\",\"size\":\"large\",\"title\":\"点击返回上一级\"},on:{\"click\":_vm.upside}},[_vm._v(_vm._s(_vm.adName))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\">\n    <div id=\"myMap\"></div>\n    <el-button type=\"primary\" size=\"large\" title=\"点击返回上一级\" class=\"btn\" @click=\"upside\">{{ adName }}</el-button>\n  </div>\n</template>\n<script>\nimport axios from 'axios'\nlet myChartMap = null //地图\nexport default {\n  name: 'about',\n  data() {\n    return {\n      optionMap: {\n        tooltip: {\n          show: false,\n        },\n        geo: [\n          {\n            map: 'china',\n            aspectScale: 1,\n            zoom: 0.9,\n            layoutCenter: ['50%', '50%'],\n            layoutSize: '180%',\n            show: true,\n            roam: false,\n            label: {\n              show: false,\n              color: '#fff',\n            },\n            itemStyle: {\n              areaColor: {\n                type: 'linear',\n                x: 1200,\n                y: 0,\n                x2: 0,\n                y2: 0,\n                colorStops: [\n                  {\n                    offset: 0,\n                    color: 'rgba(3,27,78,0.75)',\n                  },\n                  {\n                    offset: 1,\n                    color: 'rgba(58,149,253,0.75)',\n                  },\n                ],\n                global: true, // 缺省为 false\n              },\n              borderColor: '#c0f3fb',\n              borderWidth: 0.8,\n            },\n            emphasis: {\n              itemStyle: {\n                show: false,\n                color: '#fff',\n                areaColor: 'rgba(0,254,233,0.6)',\n              },\n              label: {\n                show: true,\n                color: '#fff',\n              },\n            },\n          },\n          // 重影\n          {\n            type: 'map',\n            map: 'china',\n            zlevel: -1,\n            aspectScale: 1,\n            zoom: 0.9,\n            layoutCenter: ['50%', '51%'],\n            layoutSize: '180%',\n            roam: false,\n            silent: true,\n            itemStyle: {\n              borderWidth: 1,\n              borderColor: 'rgba(58,149,253,0.8)',\n              shadowColor: 'rgba(172, 122, 255,0.5)',\n              shadowOffsetY: 5,\n              shadowBlur: 15,\n              areaColor: 'rgba(5,21,35,0.1)',\n            },\n          },\n          {\n            type: 'map',\n            map: 'china',\n            zlevel: -2,\n            aspectScale: 1,\n            zoom: 0.9,\n            layoutCenter: ['50%', '52%'],\n            layoutSize: '180%',\n            roam: false,\n            silent: true,\n            itemStyle: {\n              borderWidth: 1,\n              borderColor: 'rgba(58,149,253,0.6)',\n              shadowColor: 'rgba(65, 214, 255,0.6)',\n              shadowOffsetY: 5,\n              shadowBlur: 15,\n              areaColor: 'rgba(5,21,35,0.1)',\n            },\n          },\n          {\n            type: 'map',\n            map: 'china',\n            zlevel: -3,\n            aspectScale: 1,\n            zoom: 0.9,\n            layoutCenter: ['50%', '53%'],\n            layoutSize: '180%',\n            roam: false,\n            silent: true,\n            itemStyle: {\n              borderWidth: 1,\n              borderColor: 'rgba(58,149,253,0.4)',\n              shadowColor: 'rgba(29, 111, 165,1)',\n              shadowOffsetY: 15,\n              shadowBlur: 10,\n              areaColor: 'rgba(5,21,35,0.1)',\n            },\n          },\n          {\n            type: 'map',\n            map: 'china',\n            zlevel: -4,\n            aspectScale: 1,\n            zoom: 0.9,\n            layoutCenter: ['50%', '54%'],\n            layoutSize: '180%',\n            roam: false,\n            silent: true,\n            itemStyle: {\n              borderWidth: 5,\n              borderColor: 'rgba(5,9,57,0.8)',\n              shadowColor: 'rgba(29, 111, 165,0.8)',\n              shadowOffsetY: 15,\n              shadowBlur: 10,\n              areaColor: 'rgba(5,21,35,0.1)',\n            },\n          },\n        ],\n        series: [\n          {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: [],\n          },\n        ],\n      },\n      publicUrl: 'https://geo.datav.aliyun.com/areas_v3/bound/',\n      level: 0,\n      historyData: [],\n      adName: '中国',\n      alladcode: '',\n    }\n  },\n  methods: {\n    // 南沙诸岛以缩略图展示\n    async formatJson(chinaGeoJson) {\n      chinaGeoJson.features.forEach((v) => {\n        if (v.properties && v.properties.name == '海南省') {\n          v.geometry.coordinates = v.geometry.coordinates.slice(0, 1)\n        }\n      })\n      // 过滤掉海南诸岛边界线\n      chinaGeoJson.features = chinaGeoJson.features.filter((item) => item.properties.adcode !== '100000_JD')\n      return chinaGeoJson\n    },\n    // 初始化\n    async initChart() {\n      // 获取地图name对应的adcode行政区划编码\n      let geoJson = await this.getGeoJson('all.json')\n      this.alladcode = geoJson.data\n      let chinaGeoJson = await this.getGeoJson('100000_full.json')\n      let formatChinaGeoJson = await this.formatJson(chinaGeoJson.data)\n      this.initEcharts(formatChinaGeoJson, 'china')\n    },\n    // 格式图表\n    formatChart(geoJson, name) {\n      this.adName = name == 'china' ? '中国' : name\n      this.$echarts.registerMap(name, geoJson)\n      this.optionMap.geo.forEach((v) => {\n        v.map = name\n        v.layoutSize = name == 'china' ? '180%' : '100%'\n      })\n      myChartMap.clear()\n      myChartMap.setOption(this.optionMap)\n    },\n    //echarts绘图\n    initEcharts(geoJson, name) {\n      this.formatChart(geoJson, name)\n      myChartMap.hideLoading()\n      window.addEventListener('resize', () => {\n        myChartMap.resize()\n      })\n      this.level++\n      this.historyData.push({ geoJson, name })\n      myChartMap.off('click')\n      myChartMap.on('click', (params) => {\n        let clickRegionCode = this.alladcode.filter((areaJson) => areaJson.name === params.name)[0].adcode\n        // 没有区县的地级市,东莞,中山,儋州,三沙,嘉峪关\n        let adcodeArr = ['460400', '460300', '441900', '442000', '620200']\n        let regJson = `${clickRegionCode}_full.json`\n        // 区县或者没有区县的地级市\n        if (clickRegionCode.toString().slice(-2) != '00' || adcodeArr.includes(clickRegionCode.toString())) {\n          regJson = `${clickRegionCode}.json`\n        }\n        this.getGeoJson(regJson)\n          .then((regionGeoJson) => {\n            this.initEcharts(regionGeoJson.data, params.name)\n          })\n          .catch((err) => {\n            this.level = 0\n            this.historyData = []\n            this.initEcharts(require('@/util/china.json'), 'china')\n          })\n      })\n    },\n    //获取地图json数据\n    async getGeoJson(jsonName) {\n      return await axios.get(this.publicUrl + jsonName)\n    },\n    // 返回上一级\n    upside() {\n      if (this.historyData.length <= 1) return\n      this.level--\n      this.historyData.pop()\n      let upData = this.historyData[this.level - 1]\n      this.formatChart(upData.geoJson, upData.name)\n    },\n  },\n  watch: {\n    '$store.state.isCollapse': {\n      handler(newVal, oldVal) {\n        setTimeout(() => {\n          myChartMap.resize()\n        }, 500)\n      },\n    },\n  },\n  mounted() {\n    myChartMap = this.$echarts.init(document.getElementById('myMap'))\n    myChartMap.showLoading({\n      text: '加载中...',\n      textColor: '#fff',\n      color: '#fff',\n      maskColor: 'rgba(0 ,0 ,0 ,0.3 )',\n      zlevel: 0,\n    })\n    this.initChart()\n  },\n  destroyed() {\n    if (myChartMap) myChartMap.clear()\n  },\n}\n</script>\n<style lang=\"less\">\n.about {\n  // background: #000469;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n  background: url('../../public/home/bg4.jpg');\n}\n#myMap {\n  width: 100%;\n  height: 100%;\n}\n.btn {\n  position: absolute;\n  top: 0px;\n  left: 10px;\n  font-size: 30px;\n}\n.map-point {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100px;\n  height: 100px;\n  background: url('../../public/home/bg4.jpg') no-repeat;\n  background-size: 100%;\n  display: none;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./echarts3.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./echarts3.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./echarts3.vue?vue&type=template&id=b59435c0\"\nimport script from \"./echarts3.vue?vue&type=script&lang=js\"\nexport * from \"./echarts3.vue?vue&type=script&lang=js\"\nimport style0 from \"./echarts3.vue?vue&type=style&index=0&id=b59435c0&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./echarts3.vue?vue&type=style&index=0&id=b59435c0&prod&lang=less\""],"sourceRoot":""}